var detailHTML =  '<div class="component detail">'
detailHTML 	   += '<div class="worksClose"><div class="content"><div><div class="line"></div><div class="line"></div></div></div></div>'
detailHTML     += ' 	<div class="component video">'
detailHTML     += ' 		<div class="videoContainer">'
detailHTML     += '         	<div class="scrollDown">'
detailHTML     += ' 				<span>scroll down</span>'
detailHTML     += '                 <div class="scrollBomb"></div>'
detailHTML     += '             </div>'
detailHTML     += '             <div class="play">'
detailHTML     += '             	<span class="icon"></span>'
detailHTML     += '             </div>'
detailHTML     += '             <div class="contentAsset"></div>'
detailHTML     += '             <div class="layer"></div>'
detailHTML     += '     	</div>'
detailHTML     += ' 	</div>'
detailHTML     += ' 	<div class="content" id="luxy">'
detailHTML     += '     	<div class="spaceHeader"></div>'
detailHTML     += '         <div class="subContent">'
detailHTML     += '         	<div class="component descriptions">'
detailHTML     += ' 				<div class="container">'
detailHTML     += '             	<div class="column cilent">'
detailHTML     += ' 					Handsaway'
detailHTML     += ' 				</div>'
detailHTML     += '             	<div class="column skills ">'
detailHTML     += ' 					<div class="skill">#harassment</div>'
detailHTML     += ' 					<div class="skill">#metoo</div>'
detailHTML     += ' 					<div class="skill">#ghost injuries</div>'
detailHTML     += ' 					<div class="skill">#snapchat</div>'
detailHTML     += ' 					<div class="skill">#data</div>'
detailHTML     += ' 				</div>'
detailHTML     += '                 <div class="column rewards last">'
detailHTML     += '  					<div class="reward">'
detailHTML     += ' 						<span class="logo">'
detailHTML     += ' 							<img src="imgs/lion@2x.png">'
detailHTML     += ' 						</span>'
detailHTML     += ' 					</div>'
detailHTML     += ' 				</div>'
detailHTML     += ' 				</div>'
detailHTML     += '             </div>'
detailHTML     += ' 			<div class="component text">'
detailHTML     += ' 				<div class="center">'
detailHTML     += ' 					<div class="textContainer">'
detailHTML     += ' 						<div class="text">'
detailHTML     += ' « Get in my car, I will make you dream! »<br>« Hey baby, you got a boyfriend? » « Damnnn. I mean, dammmmn. »<br>« Ooooh look at that ass, I want to put my face in that. »<br><br>85% of women have already been street harassed.<br>'
detailHTML     += ' 						</div>'
detailHTML     += ' 				 	</div>'
detailHTML     += ' 				</div>'
detailHTML     += '     		</div>'
detailHTML     += '  			<div class="full">'
detailHTML     += '             	<div class="cover-image">'
detailHTML	   += ' 					<div class="contentAsset">'
detailHTML     += ' 						<img src="imgs/full.png" height="792px">'
detailHTML     += '   					</div>'
detailHTML     += '              	</div>'
detailHTML     += '              </div>'
detailHTML     += ' 			<div class="component text">'
detailHTML     += ' 				<div class="center">'
detailHTML     += ' 					<div class="textContainer">'
detailHTML     += '    						<div class="text">'
detailHTML     += '                           Hands Away, the first app against sexist agressions wanted to highlight this tragedy.<br><br>Ghost injuries.<br>It happened once there. Wherever, it will haunt her forever.<br><br>We collected data from the application to turn each geolocated harassment reported into a Snapchat geofilter. Creating 423 different geofilters Only available where the tragedy happened. Meaning everywhere. In order to teach people those furtive insults never really disappear. And that the best way to make it stop is to act when you’re here. 2500 people shared their support on Snapchat. Generating 12,3M impressions of the #Ghost injuries filters. and +65% in downloads of Hands Away app Helping Marina B, Faustine G, Julie, Chloe to feel a little less alone. And encouraging people to act if they witnessed an act. No filter can alleviate the pain of being harassed. But now, there is one to report it.'
detailHTML     += ' 						</div>'
detailHTML     += ' 					</div>'
detailHTML     += ' 				 </div>'
detailHTML     += ' 			</div>'
detailHTML     += ' 			<div class="gridimage">'
detailHTML     += ' 				<div class="left">'
detailHTML     += ' 					<div class="contentAsset">'
detailHTML     += '                     	<img src="imgs/grid-a2.gif"/>'
detailHTML     += ' 					</div>'
detailHTML     += ' 					<div class="contentAsset">'
detailHTML     += '                     	<img src="imgs/grid-b2.gif"/>'
detailHTML     += ' 					</div>'
detailHTML     += ' 					<div class="contentAsset">'
detailHTML     += '                     	<img src="imgs/grid-b1.gif"/>'
detailHTML     += ' 					</div>'
detailHTML     += ' 				</div>'
detailHTML     += ' 				<div class="right">'
detailHTML     += ' 					<div class="contentAsset">'
detailHTML     += '                     	<img src="imgs/grid-a3.gif"/>'
detailHTML     += ' 					</div>'
detailHTML     += ' 					<div class="contentAsset">'
detailHTML     += '                     	<img src="imgs/grid-b3.gif"/>'
detailHTML     += ' 					</div>'
detailHTML     += ' 					<div class="contentAsset">'
detailHTML     += '                     	<img src="imgs/grid-b4.gif"/>'
detailHTML     += ' 					</div>'
detailHTML     += ' 				</div>'
detailHTML 	   += ' 			</div>'
detailHTML     += ' 			<div class="component text">'
detailHTML     += ' 				<div class="center">'
detailHTML     += ' 					<div class="textContainer">'
detailHTML     += '    						<div class="text">'
detailHTML     += '                           The Papier plein started winning prizes even before it was launched. It won the Figaro’s Adfight competition and won 2.5 million euros worth of media space.'
detailHTML     += ' 						</div>'
detailHTML     += ' 					</div>'
detailHTML     += ' 				 </div>'
detailHTML     += ' 			</div>'

detailHTML     += '             <div class="slider">'
detailHTML     += '             	<div class="slider-wrapper flex">'
detailHTML     += '                 	<div class="slide flex">'
detailHTML     += '                     <div class="slide-image slider-link prev"><img src="media/workright10jpg.jpg"><div class="overlay"></div></div>'
detailHTML     += '                     <div class="slide-content">'
detailHTML     += '                     			<div class="slide-date">30.07.2017.</div><div class="slide-title">LOREM IPSUM DOLOR SITE MATE, AD EST ABHORREANT</div><div class="slide-text">Lorem ipsum dolor sit amet, ad est abhorreant efficiantur, vero oporteat apeirian in vel. Et appareat electram appellantur est. Ei nec duis invenire. Cu mel ipsum laoreet, per rebum omittam ex. </div>'
detailHTML     += '                      <div class="slide-more">READ MORE</div></div></div>'
detailHTML     += '                      <div class="slide flex"><div class="slide-image slider-link next"><img src="media/workright6jpg.jpg"><div class="overlay"></div></div><div class="slide-content"><div class="slide-date">30.08.2017.</div><div class="slide-title">LOREM IPSUM DOLOR SITE MATE, AD EST ABHORREANT</div><div class="slide-text">Lorem ipsum dolor sit amet, ad est abhorreant efficiantur, vero oporteat apeirian in vel. Et appareat electram appellantur est. Ei nec duis invenire. Cu mel ipsum laoreet, per rebum omittam ex. </div><div class="slide-more">READ MORE</div></div></div>'
detailHTML     += '                      <div class="slide flex"><div class="slide-image slider-link next"><img src="media/workright5jpg.jpg"><div class="overlay"></div></div><div class="slide-content"><div class="slide-date">30.09.2017.</div><div class="slide-title">LOREM IPSUM DOLOR SITE MATE, AD EST ABHORREANT</div><div class="slide-text">Lorem ipsum dolor sit amet, ad est abhorreant efficiantur, vero oporteat apeirian in vel. Et appareat electram appellantur est. Ei nec duis invenire. Cu mel ipsum laoreet, per rebum omittam ex. </div><div class="slide-more">READ MORE</div></div></div>'
detailHTML     += '                      <div class="slide flex"><div class="slide-image slider-link next"><img src="media/workright10jpg.jpg"><div class="overlay"></div></div><div class="slide-content"><div class="slide-date">30.10.2017.</div><div class="slide-title">LOREM IPSUM DOLOR SITE MATE, AD EST ABHORREANT</div><div class="slide-text">Lorem ipsum dolor sit amet, ad est abhorreant efficiantur, vero oporteat apeirian in vel. Et appareat electram appellantur est. Ei nec duis invenire. Cu mel ipsum laoreet, per rebum omittam ex. </div><div class="slide-more">READ MORE</div></div></div></div>'
detailHTML     += '              <div class="arrows"><a href="#" title="Previous" class="arrow slider-link prev"></a><a href="#" title="Next" class="arrow slider-link next"></a></div></div>'
detailHTML     += ''

detailHTML     += ''
detailHTML     += '         </div>'
detailHTML     += '         <div class="spaceFooter"></div>'
detailHTML     += ' 	</div>'
detailHTML     += ' 	<div class="component footer">'
detailHTML     += '     	<div class="container">'
detailHTML     += ' 			<div class="center">'
detailHTML     += ' 				<div class="column">'
detailHTML     += '     				<h3><span>address</span></h3>'
detailHTML     += '  					<div class="rightContainer"><div class="text">162-164 rue de Billancourt</div><div class="text">92100 Boulogne-Billancourt</div><div class="text">France</div><div class="phone"><span class="grey">+33</span><!-- react-text: 1141 -->(0)1 49 09 70 10<!-- /react-text --></div></div>'
detailHTML     += ' 				</div>'
detailHTML     += ' 				<div class="column" style="opacity: 0.999999; transform: translate3d(0px, 0px, 0px);"><h3><span>emails</span></h3><div class="rightContainer"><div class="text"><a href="mailto:hello@danparis.fr"><span class="hover">hello@danparis.fr</span></a><a href="mailto:businessenquiries@danparis.fr"><span class="hover">businessenquiries@danparis.fr</span></a><a href="mailto:jobs@danparis.fr"><span class="hover">jobs@danparis.fr</span></a></div></div></div>'
detailHTML     += ' 				<div class="column" style="opacity: 0.999999; transform: matrix(1, 0, 0, 1, 0, 0);"><h3><span>follow us</span></h3><div class="rightContainer"><div class="links"><a target="blank" href="https://www.facebook.com/danparisagency"><span class="hover"><span class="facebook"></span><!-- react-text: 1161 -->facebook<!-- /react-text --></span></a><a target="blank" href="https://www.instagram.com/danparis/"><span class="hover"><span class="instagram"></span><!-- react-text: 1165 -->instagram<!-- /react-text --></span></a><a target="blank" href="https://www.linkedin.com/company/dan-paris"><span class="hover"><span class="linkedin"></span><!-- react-text: 1169 -->linkedin<!-- /react-text --></span></a><a target="blank" href="https://twitter.com/tbwadanparis"><span class="hover"><span class="twitter"></span><!-- react-text: 1173 -->twitter<!-- /react-text --></span></a></div></div></div>'
detailHTML     += ' 			</div>'
detailHTML     += '   		</div>'
detailHTML     += ' 	</div>'
detailHTML     += '</div">'
var videoEl;
function loadVideo(){
	videoEl =new vidbg('.contentAsset', 
		{mp4: 'media/8.mp4',
	      overlay: false},{autoplay:false,muted:false});
}

function loadDetailPage(selector){
	$(selector).append(detailHTML);
	loadVideo();
	initluxy();
	bindEvent();
	$('.worksClose').fadeIn(300);
}

function bindEvent(){
	$('.play').click((e)=>{
		videoEl.playVideo();
		$('.play').fadeOut('fast');
		e.stopPropagation();
	});

	$('.videoContainer').click(function(event) {
		if(!videoEl.videoEl.paused){
			videoEl.pauseVideo();
			$('.play').fadeIn('fast');
		}
	});

	$('.worksClose').click(function(event) {
		$('.works').trigger('click');
		$(this).fadeOut(300);
	});

	$(document).scroll(function(event) {
		var scroH = parseInt($(this).scrollTop()); //滚动高度
        var viewH = $(this).height(); //可见高度
        var contentH = $('.page').get(0).scrollHeight; //内容高度
        var footerHeight = $('.footer').get(0).scrollHeight;
 
        if(scroH >= (viewH -contentH ) ){
        	$('.component.detail .footer').show();
        }
        if(scroH < (viewH - footerHeight -window.innerHeight)){
        	$('.component.detail .footer').hide();
        }
	});

	(function($) {
  
  $(document).ready(function() {
    
    var s           = $('.slider'),
        sWrapper    = s.find('.slider-wrapper'),
        sItem       = s.find('.slide'),
        btn         = s.find('.slider-link'),
        sWidth      = sItem.width(),
        sCount      = sItem.length,
        slide_date  = s.find('.slide-date'),
        slide_title = s.find('.slide-title'),
        slide_text  = s.find('.slide-text'),
        slide_more  = s.find('.slide-more'),
        slide_image = s.find('.slide-image img'),
        sTotalWidth = sCount * sWidth;
    
    sWrapper.css('width', sTotalWidth);
    sWrapper.css('width', sTotalWidth);
    
    var clickCount  = 0;
    
    btn.on('click', function(e) {
      e.preventDefault();

      if( $(this).hasClass('next') ) {
        
        ( clickCount < ( sCount - 1 ) ) ? clickCount++ : clickCount = 0;
      } else if ( $(this).hasClass('prev') ) {
        
        ( clickCount > 0 ) ? clickCount-- : ( clickCount = sCount - 1 );
      }
      TweenMax.to(sWrapper, 0.4, {x: '-' + ( sWidth * clickCount ) })


      //CONTENT ANIMATIONS

      var fromProperties = {autoAlpha:0, x:'-50', y:'-10'};
      var toProperties = {autoAlpha:0.8, x:'0', y:'0'};

      TweenLite.fromTo(slide_image, 1, {autoAlpha:0, y:'40'}, {autoAlpha:1, y:'0'});
      TweenLite.fromTo(slide_date, 0.4, fromProperties, toProperties);
      TweenLite.fromTo(slide_title, 0.6, fromProperties, toProperties);
      TweenLite.fromTo(slide_text, 0.8, fromProperties, toProperties);
      TweenLite.fromTo(slide_more, 1, fromProperties, toProperties);

    });
          
  });
})(jQuery);

$('.overlay').addClass('overlay-blue');
}

function initluxy(){
	luxy.init();
	$(window).scroll(function(event) {
		var top = $(this).scrollTop();
		if(top>=500){
			$('.spaceHeader').css({
				'opacity': '1'
			});
		}else if(top >= 400){
			$('.spaceHeader').css({
				'opacity': '.8'
			});
		}
		else if(top >= 300){
			$('.spaceHeader').css({
				'opacity': '.6'
			});
		}else if(top >= 200){
			$('.spaceHeader').css({
				'opacity': '0.4'
			});
		}else if(top >= 100){
			$('.spaceHeader').css({
				'opacity': '0.2'
			});
		}else if(top>= 5){
			$('.spaceHeader').css({
				'opacity': '0'
			});
		}
	});
}

